{"ast":null,"code":"import _toConsumableArray from\"C:/Users/a841267/git/AWS-Build1/src/main/app/node_modules/@babel/runtime/helpers/esm/toConsumableArray.js\";import _defineProperty from\"C:/Users/a841267/git/AWS-Build1/src/main/app/node_modules/@babel/runtime/helpers/esm/defineProperty.js\";import _slicedToArray from\"C:/Users/a841267/git/AWS-Build1/src/main/app/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useState,useEffect,useContext}from\"react\";import{useNavigate}from\"react-router-dom\";import DisplayPDF from\"./DisplayPDF\";import{ToastContainer,toast,Slide}from\"react-toastify\";import'react-toastify/dist/ReactToastify.css';import axios from\"axios\";import{PersonContext}from\"../context/PersonContext\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";export default function FinalPreview(){var _useState=useState(false),_useState2=_slicedToArray(_useState,2),checked=_useState2[0],setChecked=_useState2[1];var _useState3=useState([]),_useState4=_slicedToArray(_useState3,2),files=_useState4[0],setFiles=_useState4[1];var navigate=useNavigate();var states=useContext(PersonContext);var filenames=[\"Personal-Details-Form\",\"Bank-Details-Form\",\"Criminal-Record-Declaration\",\"Diversity-Monitoring\",\"Driver-Fair-Processing\",\"HMRC-Checklist\",\"Life-Assurance\",\"Referees-Form\"];var handleSubmit=function handleSubmit(){if(checked){navigate(\"/survey\");}else{toast.info(\"Please check all the documents and confirm that they have been correctly filled out.\",_defineProperty({position:\"top-right\",autoClose:5000,hideProgressBar:false,closeOnClick:true,pauseOnHover:true,draggable:true,progress:undefined},\"hideProgressBar\",true));}};useEffect(function(){function fetchEmptyForms(i){if(i===filenames.length){return;};axios.get(\"/api/v1/person/filled-forms/\"+filenames[i]+\".pdf\",{responseType:\"blob\"}).then(function(res){var blob=new Blob([res.data]);var objectUrl=URL.createObjectURL(blob);setFiles(function(files){return[].concat(_toConsumableArray(files),[objectUrl]);});return fetchEmptyForms(i+1);}).catch(function(err){console.log(\"Error in getting PDFs!\"+err);});};fetchEmptyForms(0);},[]);var viewPDF=files.map(function(file,index){return/*#__PURE__*/_jsx(DisplayPDF,{file:file,docTitle:filenames[index].replaceAll(\"-\",\" \")});});return/*#__PURE__*/_jsxs(\"div\",{className:\"container text-center\",children:[/*#__PURE__*/_jsx(ToastContainer,{position:\"top-right\",transition:Slide,autoClose:5000,hideProgressBar:false,newestOnTop:false,closeOnClick:true,rtl:false,pauseOnFocusLoss:true,draggable:true,pauseOnHover:true}),/*#__PURE__*/_jsxs(\"div\",{className:\"row justify-content-center\",children:[/*#__PURE__*/_jsx(\"h1\",{className:\"form-title\",children:\"Final Preview\"}),/*#__PURE__*/_jsx(\"h4\",{children:\"Please check that all the information is correct\"}),viewPDF,/*#__PURE__*/_jsx(\"div\",{className:\"row my-2\",children:/*#__PURE__*/_jsxs(\"label\",{children:[/*#__PURE__*/_jsx(\"input\",{className:\"mx-2\",type:\"checkbox\",checked:checked,onChange:function onChange(e){return setChecked(e.target.checked);}}),/*#__PURE__*/_jsx(\"span\",{children:\"I confirm that to the best of my knowledge the above information is correct.\"})]})}),/*#__PURE__*/_jsxs(\"div\",{className:\"row my-4 justify-content-center\",children:[/*#__PURE__*/_jsx(\"button\",{onClick:function onClick(){return navigate(\"/Loans\");},className:\"btn btn-danger col-4 mx-1\",children:\"Back\"}),/*#__PURE__*/_jsx(\"button\",{onClick:handleSubmit,className:\"btn btn-success col-4 mx-1\",children:\"Submit Documents\"})]})]})]});}","map":{"version":3,"sources":["C:/Users/a841267/git/AWS-Build1/src/main/app/src/components/FinalPreview.js"],"names":["React","useState","useEffect","useContext","useNavigate","DisplayPDF","ToastContainer","toast","Slide","axios","PersonContext","FinalPreview","checked","setChecked","files","setFiles","navigate","states","filenames","handleSubmit","info","position","autoClose","hideProgressBar","closeOnClick","pauseOnHover","draggable","progress","undefined","fetchEmptyForms","i","length","get","responseType","then","res","blob","Blob","data","objectUrl","URL","createObjectURL","catch","err","console","log","viewPDF","map","file","index","replaceAll","e","target"],"mappings":"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","sourcesContent":["import React, { useState, useEffect, useContext } from \"react\";\r\nimport { useNavigate } from \"react-router-dom\";\r\nimport DisplayPDF from \"./DisplayPDF\";\r\nimport { ToastContainer, toast, Slide } from \"react-toastify\";\r\nimport 'react-toastify/dist/ReactToastify.css';\r\nimport axios from \"axios\";\r\n\r\nimport { PersonContext } from \"../context/PersonContext\";\r\n\r\nexport default function FinalPreview() {\r\n\r\n    const [checked, setChecked] = useState(false);\r\n    const [files, setFiles] = useState([]);\r\n    const navigate = useNavigate();\r\n    const states = useContext(PersonContext);\r\n\r\n    const filenames = [\"Personal-Details-Form\", \"Bank-Details-Form\", \"Criminal-Record-Declaration\", \"Diversity-Monitoring\", \"Driver-Fair-Processing\", \"HMRC-Checklist\", \"Life-Assurance\", \"Referees-Form\"];\r\n\r\n    const handleSubmit = () => {\r\n        if (checked){\r\n\r\n            navigate(\"/survey\")\r\n        } else {\r\n            toast.info(\"Please check all the documents and confirm that they have been correctly filled out.\", \r\n            {\r\n                position: \"top-right\",\r\n                autoClose: 5000,\r\n                hideProgressBar: false,\r\n                closeOnClick: true,\r\n                pauseOnHover: true,\r\n                draggable: true,\r\n                progress: undefined,\r\n                hideProgressBar:true,\r\n            }); \r\n        }\r\n    }\r\n\r\n    useEffect(() => {\r\n        function fetchEmptyForms(i) {\r\n            if (i === filenames.length) { return; };\r\n\r\n            axios.get(\"/api/v1/person/filled-forms/\" + filenames[i] + \".pdf\", { responseType: \"blob\" })\r\n            .then(res => {\r\n                const blob = new Blob([res.data]);\r\n                const objectUrl = URL.createObjectURL(blob);\r\n                setFiles(files => [...files, objectUrl]);\r\n\r\n                return fetchEmptyForms(i + 1);\r\n            })\r\n            .catch(err => {\r\n                console.log(\"Error in getting PDFs!\" + err);\r\n            })\r\n        };\r\n        \r\n        fetchEmptyForms(0);\r\n        \r\n    }, [])\r\n\r\n    const viewPDF = files.map((file, index) => (\r\n        <DisplayPDF file={file} docTitle={filenames[index].replaceAll(\"-\", \" \")}/>\r\n    ));\r\n\r\n    return (\r\n        <div className=\"container text-center\">\r\n            \r\n            <ToastContainer \r\n                position=\"top-right\"\r\n                transition={Slide}\r\n                autoClose={5000}\r\n                hideProgressBar={false}\r\n                newestOnTop={false}\r\n                closeOnClick\r\n                rtl={false}\r\n                pauseOnFocusLoss\r\n                draggable\r\n                pauseOnHover \r\n            />\r\n\r\n            <div className=\"row justify-content-center\">\r\n                <h1 className=\"form-title\">Final Preview</h1>\r\n                <h4>Please check that all the information is correct</h4>\r\n\r\n                {viewPDF}\r\n\r\n                <div className=\"row my-2\">\r\n                    <label>\r\n                        <input className=\"mx-2\" type=\"checkbox\" checked={checked} onChange={(e) => setChecked(e.target.checked)}/>\r\n                        <span>I confirm that to the best of my knowledge the above information is correct.</span>\r\n                    </label>\r\n                </div>\r\n\r\n                <div className=\"row my-4 justify-content-center\">\r\n                    <button onClick={() => navigate(\"/Loans\")} className=\"btn btn-danger col-4 mx-1\">Back</button>\r\n                    <button onClick={handleSubmit} className=\"btn btn-success col-4 mx-1\">Submit Documents</button>\r\n                </div> \r\n            </div> \r\n        </div>\r\n    )\r\n}"]},"metadata":{},"sourceType":"module"}